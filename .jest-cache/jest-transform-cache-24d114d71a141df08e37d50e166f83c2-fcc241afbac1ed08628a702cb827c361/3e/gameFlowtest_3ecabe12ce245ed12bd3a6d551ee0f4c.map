{"version":3,"names":["_getJestObj","mock","_react","_interopRequireDefault","require","_react2","_App","_jsxRuntime","e","__esModule","default","jest","describe","beforeEach","useFakeTimers","clearAllMocks","afterEach","runOnlyPendingTimers","useRealTimers","it","render","jsx","expect","screen","getByText","toBeInTheDocument","startButton","act","fireEvent","click","waitFor","advanceTimersByTime","restartButton","queryByText","photoButton","closeButton","getByRole","name","not","videoButton","muteButton","unmount","toThrow"],"sources":["gameFlow.test.js"],"sourcesContent":["import React from 'react';\nimport { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\nimport BirthdayPianoSurprise from '../../App';\n\n// Mock dependencies\njest.mock('../../utils/mediaLoader');\njest.mock('../../store/celebrationStore');\n\ndescribe('Game Flow Integration Tests', () => {\n  beforeEach(() => {\n    jest.useFakeTimers();\n    jest.clearAllMocks();\n  });\n\n  afterEach(() => {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  });\n\n  describe('Complete Game Flow', () => {\n    it('should complete full game cycle: welcome -> game -> celebration -> galleries', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // 1. Welcome Screen\n      expect(screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();\n      \n      // 2. Start Game\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      await act(async () => {\n        fireEvent.click(startButton);\n      });\n      \n      // 3. Game Screen\n      await waitFor(() => {\n        expect(screen.getByText(/Score:/)).toBeInTheDocument();\n        expect(screen.getByText(/Lives:/)).toBeInTheDocument();\n      });\n      \n      // 4. Simulate game completion\n      act(() => {\n        jest.advanceTimersByTime(10000);\n      });\n      \n      // 5. Celebration Screen with Galleries\n      await waitFor(() => {\n        expect(screen.getByText('Photo Gallery')).toBeInTheDocument();\n        expect(screen.getByText('Video Gallery')).toBeInTheDocument();\n      });\n    });\n\n    it('should handle game restart correctly', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Complete one game cycle\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      await act(async () => {\n        fireEvent.click(startButton);\n      });\n      \n      act(() => {\n        jest.advanceTimersByTime(10000);\n      });\n      \n      // Should be able to restart\n      await waitFor(() => {\n        const restartButton = screen.queryByText(/Play Again|Restart/);\n        if (restartButton) {\n          fireEvent.click(restartButton);\n        }\n      });\n    });\n  });\n\n  describe('Gallery Integration', () => {\n    it('should open and close photo gallery', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Navigate to celebration\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      await act(async () => {\n        fireEvent.click(startButton);\n      });\n      \n      act(() => {\n        jest.advanceTimersByTime(10000);\n      });\n      \n      // Open photo gallery\n      await waitFor(() => {\n        const photoButton = screen.getByText('Photo Gallery');\n        fireEvent.click(photoButton);\n      });\n      \n      // Should show gallery modal\n      await waitFor(() => {\n        expect(screen.getByText('ðŸ“¸')).toBeInTheDocument();\n      });\n      \n      // Close gallery\n      const closeButton = screen.getByRole('button', { name: /close|Ã—/ });\n      fireEvent.click(closeButton);\n      \n      // Should return to celebration screen\n      await waitFor(() => {\n        expect(screen.queryByText('ðŸ“¸')).not.toBeInTheDocument();\n      });\n    });\n\n    it('should open and close video gallery', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Navigate to celebration\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      await act(async () => {\n        fireEvent.click(startButton);\n      });\n      \n      act(() => {\n        jest.advanceTimersByTime(10000);\n      });\n      \n      // Open video gallery\n      await waitFor(() => {\n        const videoButton = screen.getByText('Video Gallery');\n        fireEvent.click(videoButton);\n      });\n      \n      // Should show gallery modal\n      await waitFor(() => {\n        expect(screen.getByText('ðŸŽ¥')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Audio Integration', () => {\n    it('should handle mute/unmute throughout game flow', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Start game\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      await act(async () => {\n        fireEvent.click(startButton);\n      });\n      \n      // Find and test mute button\n      await waitFor(() => {\n        const muteButton = screen.getByRole('button', { name: /ðŸ”Š|ðŸ”‡/ });\n        \n        // Toggle mute\n        fireEvent.click(muteButton);\n        fireEvent.click(muteButton);\n        \n        expect(muteButton).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Performance Integration', () => {\n    it('should handle rapid user interactions', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      \n      // Rapid clicks shouldn't break the app\n      await act(async () => {\n        fireEvent.click(startButton);\n        fireEvent.click(startButton);\n        fireEvent.click(startButton);\n      });\n      \n      // Should still work normally\n      await waitFor(() => {\n        expect(screen.getByText(/Score:/)).toBeInTheDocument();\n      });\n    });\n\n    it('should handle timer cleanup on unmount', () => {\n      const { unmount } = render(<BirthdayPianoSurprise />);\n      \n      // Start some timers\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      act(() => {\n        fireEvent.click(startButton);\n      });\n      \n      // Unmount should not cause memory leaks\n      expect(() => unmount()).not.toThrow();\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}