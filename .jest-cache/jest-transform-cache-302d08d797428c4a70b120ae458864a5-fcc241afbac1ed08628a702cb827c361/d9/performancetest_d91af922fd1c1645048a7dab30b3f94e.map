{"version":3,"names":["_performance","require","describe","it","done","callCount","debouncedFn","debounce","setTimeout","expect","toBe","throttledFn","throttle","expensiveFunction","n","memoizedFn","memoize","originalGetContext","HTMLCanvasElement","prototype","getContext","jest","fn","tier","getDevicePerformanceTier","toContain","settings","getOptimizedAnimationSettings","toHaveProperty","maxFloatingElements","animationQuality","enableParticles","enableShadows"],"sources":["performance.test.js"],"sourcesContent":["import { \r\n  debounce, \r\n  throttle, \r\n  memoize, \r\n  getDevicePerformanceTier,\r\n  getOptimizedAnimationSettings \r\n} from '../../utils/performance';\r\n\r\ndescribe('Performance Utils', () => {\r\n  describe('debounce', () => {\r\n    it('should debounce function calls', (done) => {\r\n      let callCount = 0;\r\n      const debouncedFn = debounce(() => {\r\n        callCount++;\r\n      }, 100);\r\n\r\n      // Call multiple times quickly\r\n      debouncedFn();\r\n      debouncedFn();\r\n      debouncedFn();\r\n\r\n      // Should only be called once after delay\r\n      setTimeout(() => {\r\n        expect(callCount).toBe(1);\r\n        done();\r\n      }, 150);\r\n    });\r\n  });\r\n\r\n  describe('throttle', () => {\r\n    it('should throttle function calls', (done) => {\r\n      let callCount = 0;\r\n      const throttledFn = throttle(() => {\r\n        callCount++;\r\n      }, 100);\r\n\r\n      // Call multiple times quickly\r\n      throttledFn();\r\n      throttledFn();\r\n      throttledFn();\r\n\r\n      // Should be called immediately\r\n      expect(callCount).toBe(1);\r\n\r\n      // Should be called again after throttle period\r\n      setTimeout(() => {\r\n        throttledFn();\r\n        expect(callCount).toBe(2);\r\n        done();\r\n      }, 150);\r\n    });\r\n  });\r\n\r\n  describe('memoize', () => {\r\n    it('should memoize function results', () => {\r\n      let callCount = 0;\r\n      const expensiveFunction = (n) => {\r\n        callCount++;\r\n        return n * 2;\r\n      };\r\n\r\n      const memoizedFn = memoize(expensiveFunction);\r\n\r\n      // First call\r\n      expect(memoizedFn(5)).toBe(10);\r\n      expect(callCount).toBe(1);\r\n\r\n      // Second call with same argument\r\n      expect(memoizedFn(5)).toBe(10);\r\n      expect(callCount).toBe(1); // Should not call again\r\n\r\n      // Different argument\r\n      expect(memoizedFn(3)).toBe(6);\r\n      expect(callCount).toBe(2);\r\n    });\r\n  });\r\n\r\n  describe('getDevicePerformanceTier', () => {\r\n    it('should return performance tier', () => {\r\n      // Mock canvas getContext to avoid jsdom issues\r\n      const originalGetContext = HTMLCanvasElement.prototype.getContext;\r\n      HTMLCanvasElement.prototype.getContext = jest.fn(() => null);\r\n      \r\n      const tier = getDevicePerformanceTier();\r\n      expect(['low', 'medium', 'high']).toContain(tier);\r\n      \r\n      // Restore original method\r\n      HTMLCanvasElement.prototype.getContext = originalGetContext;\r\n    });\r\n  });\r\n\r\n  describe('getOptimizedAnimationSettings', () => {\r\n    it('should return animation settings', () => {\r\n      // Mock canvas getContext to avoid jsdom issues\r\n      const originalGetContext = HTMLCanvasElement.prototype.getContext;\r\n      HTMLCanvasElement.prototype.getContext = jest.fn(() => null);\r\n      \r\n      const settings = getOptimizedAnimationSettings();\r\n      \r\n      expect(settings).toHaveProperty('maxFloatingElements');\r\n      expect(settings).toHaveProperty('animationQuality');\r\n      expect(settings).toHaveProperty('enableParticles');\r\n      expect(settings).toHaveProperty('enableShadows');\r\n      \r\n      expect(typeof settings.maxFloatingElements).toBe('number');\r\n      expect(['low', 'medium', 'high']).toContain(settings.animationQuality);\r\n      expect(typeof settings.enableParticles).toBe('boolean');\r\n      expect(typeof settings.enableShadows).toBe('boolean');\r\n      \r\n      // Restore original method\r\n      HTMLCanvasElement.prototype.getContext = originalGetContext;\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}