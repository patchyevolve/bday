4c900d238873aacc0bc8d7bee56dfcc6
"use strict";

var _react = require("@testing-library/react");
var _useAudio = require("../../hooks/useAudio");
describe('useAudio Hook', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });
  it('should initialize with correct default values', () => {
    const {
      result
    } = (0, _react.renderHook)(() => (0, _useAudio.useAudio)());
    expect(result.current.isMuted).toBe(false);
    expect(typeof result.current.playNote).toBe('function');
    expect(typeof result.current.playBackgroundMusic).toBe('function');
    expect(typeof result.current.stopBackgroundMusic).toBe('function');
    expect(typeof result.current.toggleMute).toBe('function');
  });
  it('should toggle mute state correctly', () => {
    const {
      result
    } = (0, _react.renderHook)(() => (0, _useAudio.useAudio)());
    (0, _react.act)(() => {
      result.current.toggleMute();
    });
    expect(result.current.isMuted).toBe(true);
    (0, _react.act)(() => {
      result.current.toggleMute();
    });
    expect(result.current.isMuted).toBe(false);
  });
  it('should handle audio context creation', () => {
    const {
      result
    } = (0, _react.renderHook)(() => (0, _useAudio.useAudio)());

    // Audio context should be created
    expect(global.AudioContext).toHaveBeenCalled();
  });
  it('should not play sounds when muted', () => {
    const {
      result
    } = (0, _react.renderHook)(() => (0, _useAudio.useAudio)());
    (0, _react.act)(() => {
      result.current.toggleMute();
    });

    // Should not throw when trying to play while muted
    expect(() => {
      (0, _react.act)(() => {
        result.current.playNote(440, 0.5);
      });
    }).not.toThrow();
  });
  it('should handle audio context errors gracefully', () => {
    // Mock AudioContext to throw error
    global.AudioContext = jest.fn(() => {
      throw new Error('AudioContext not supported');
    });
    expect(() => {
      (0, _react.renderHook)(() => (0, _useAudio.useAudio)());
    }).not.toThrow();
  });
  it('should cleanup audio context on unmount', () => {
    const mockClose = jest.fn();
    global.AudioContext = jest.fn(() => ({
      createOscillator: jest.fn(() => ({
        connect: jest.fn(),
        start: jest.fn(),
        stop: jest.fn(),
        frequency: {
          setValueAtTime: jest.fn(),
          exponentialRampToValueAtTime: jest.fn()
        },
        type: 'sine'
      })),
      createGain: jest.fn(() => ({
        connect: jest.fn(),
        gain: {
          setValueAtTime: jest.fn(),
          exponentialRampToValueAtTime: jest.fn()
        }
      })),
      destination: {},
      currentTime: 0,
      state: 'running',
      resume: jest.fn(() => Promise.resolve()),
      suspend: jest.fn(() => Promise.resolve()),
      close: mockClose
    }));
    const {
      unmount
    } = (0, _react.renderHook)(() => (0, _useAudio.useAudio)());
    unmount();
    expect(mockClose).toHaveBeenCalled();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX3VzZUF1ZGlvIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiamVzdCIsImNsZWFyQWxsTW9ja3MiLCJpdCIsInJlc3VsdCIsInJlbmRlckhvb2siLCJ1c2VBdWRpbyIsImV4cGVjdCIsImN1cnJlbnQiLCJpc011dGVkIiwidG9CZSIsInBsYXlOb3RlIiwicGxheUJhY2tncm91bmRNdXNpYyIsInN0b3BCYWNrZ3JvdW5kTXVzaWMiLCJ0b2dnbGVNdXRlIiwiYWN0IiwiZ2xvYmFsIiwiQXVkaW9Db250ZXh0IiwidG9IYXZlQmVlbkNhbGxlZCIsIm5vdCIsInRvVGhyb3ciLCJmbiIsIkVycm9yIiwibW9ja0Nsb3NlIiwiY3JlYXRlT3NjaWxsYXRvciIsImNvbm5lY3QiLCJzdGFydCIsInN0b3AiLCJmcmVxdWVuY3kiLCJzZXRWYWx1ZUF0VGltZSIsImV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUiLCJ0eXBlIiwiY3JlYXRlR2FpbiIsImdhaW4iLCJkZXN0aW5hdGlvbiIsImN1cnJlbnRUaW1lIiwic3RhdGUiLCJyZXN1bWUiLCJQcm9taXNlIiwicmVzb2x2ZSIsInN1c3BlbmQiLCJjbG9zZSIsInVubW91bnQiXSwic291cmNlcyI6WyJ1c2VBdWRpby50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlckhvb2ssIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHsgdXNlQXVkaW8gfSBmcm9tICcuLi8uLi9ob29rcy91c2VBdWRpbyc7XG5cbmRlc2NyaWJlKCd1c2VBdWRpbyBIb29rJywgKCkgPT4ge1xuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIHdpdGggY29ycmVjdCBkZWZhdWx0IHZhbHVlcycsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdWRpbygpKTtcblxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudC5pc011dGVkKS50b0JlKGZhbHNlKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LnBsYXlOb3RlKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmN1cnJlbnQucGxheUJhY2tncm91bmRNdXNpYykudG9CZSgnZnVuY3Rpb24nKTtcbiAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5jdXJyZW50LnN0b3BCYWNrZ3JvdW5kTXVzaWMpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgZXhwZWN0KHR5cGVvZiByZXN1bHQuY3VycmVudC50b2dnbGVNdXRlKS50b0JlKCdmdW5jdGlvbicpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHRvZ2dsZSBtdXRlIHN0YXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdWRpbygpKTtcblxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC50b2dnbGVNdXRlKCk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNNdXRlZCkudG9CZSh0cnVlKTtcblxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC50b2dnbGVNdXRlKCk7XG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQuaXNNdXRlZCkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgaGFuZGxlIGF1ZGlvIGNvbnRleHQgY3JlYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXVkaW8oKSk7XG5cbiAgICAvLyBBdWRpbyBjb250ZXh0IHNob3VsZCBiZSBjcmVhdGVkXG4gICAgZXhwZWN0KGdsb2JhbC5BdWRpb0NvbnRleHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBub3QgcGxheSBzb3VuZHMgd2hlbiBtdXRlZCcsICgpID0+IHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBdWRpbygpKTtcblxuICAgIGFjdCgoKSA9PiB7XG4gICAgICByZXN1bHQuY3VycmVudC50b2dnbGVNdXRlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBTaG91bGQgbm90IHRocm93IHdoZW4gdHJ5aW5nIHRvIHBsYXkgd2hpbGUgbXV0ZWRcbiAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgcmVzdWx0LmN1cnJlbnQucGxheU5vdGUoNDQwLCAwLjUpO1xuICAgICAgfSk7XG4gICAgfSkubm90LnRvVGhyb3coKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBoYW5kbGUgYXVkaW8gY29udGV4dCBlcnJvcnMgZ3JhY2VmdWxseScsICgpID0+IHtcbiAgICAvLyBNb2NrIEF1ZGlvQ29udGV4dCB0byB0aHJvdyBlcnJvclxuICAgIGdsb2JhbC5BdWRpb0NvbnRleHQgPSBqZXN0LmZuKCgpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXVkaW9Db250ZXh0IG5vdCBzdXBwb3J0ZWQnKTtcbiAgICB9KTtcblxuICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICByZW5kZXJIb29rKCgpID0+IHVzZUF1ZGlvKCkpO1xuICAgIH0pLm5vdC50b1Rocm93KCk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgY2xlYW51cCBhdWRpbyBjb250ZXh0IG9uIHVubW91bnQnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0Nsb3NlID0gamVzdC5mbigpO1xuICAgIGdsb2JhbC5BdWRpb0NvbnRleHQgPSBqZXN0LmZuKCgpID0+ICh7XG4gICAgICBjcmVhdGVPc2NpbGxhdG9yOiBqZXN0LmZuKCgpID0+ICh7XG4gICAgICAgIGNvbm5lY3Q6IGplc3QuZm4oKSxcbiAgICAgICAgc3RhcnQ6IGplc3QuZm4oKSxcbiAgICAgICAgc3RvcDogamVzdC5mbigpLFxuICAgICAgICBmcmVxdWVuY3k6IHsgc2V0VmFsdWVBdFRpbWU6IGplc3QuZm4oKSwgZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZTogamVzdC5mbigpIH0sXG4gICAgICAgIHR5cGU6ICdzaW5lJ1xuICAgICAgfSkpLFxuICAgICAgY3JlYXRlR2FpbjogamVzdC5mbigoKSA9PiAoe1xuICAgICAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgICAgIGdhaW46IHsgc2V0VmFsdWVBdFRpbWU6IGplc3QuZm4oKSwgZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZTogamVzdC5mbigpIH1cbiAgICAgIH0pKSxcbiAgICAgIGRlc3RpbmF0aW9uOiB7fSxcbiAgICAgIGN1cnJlbnRUaW1lOiAwLFxuICAgICAgc3RhdGU6ICdydW5uaW5nJyxcbiAgICAgIHJlc3VtZTogamVzdC5mbigoKSA9PiBQcm9taXNlLnJlc29sdmUoKSksXG4gICAgICBzdXNwZW5kOiBqZXN0LmZuKCgpID0+IFByb21pc2UucmVzb2x2ZSgpKSxcbiAgICAgIGNsb3NlOiBtb2NrQ2xvc2VcbiAgICB9KSk7XG5cbiAgICBjb25zdCB7IHVubW91bnQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXVkaW8oKSk7XG5cbiAgICB1bm1vdW50KCk7XG5cbiAgICBleHBlY3QobW9ja0Nsb3NlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBRUFFLFFBQVEsQ0FBQyxlQUFlLEVBQUUsTUFBTTtFQUM5QkMsVUFBVSxDQUFDLE1BQU07SUFDZkMsSUFBSSxDQUFDQyxhQUFhLENBQUMsQ0FBQztFQUN0QixDQUFDLENBQUM7RUFFRkMsRUFBRSxDQUFDLCtDQUErQyxFQUFFLE1BQU07SUFDeEQsTUFBTTtNQUFFQztJQUFPLENBQUMsR0FBRyxJQUFBQyxpQkFBVSxFQUFDLE1BQU0sSUFBQUMsa0JBQVEsRUFBQyxDQUFDLENBQUM7SUFFL0NDLE1BQU0sQ0FBQ0gsTUFBTSxDQUFDSSxPQUFPLENBQUNDLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzFDSCxNQUFNLENBQUMsT0FBT0gsTUFBTSxDQUFDSSxPQUFPLENBQUNHLFFBQVEsQ0FBQyxDQUFDRCxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3ZESCxNQUFNLENBQUMsT0FBT0gsTUFBTSxDQUFDSSxPQUFPLENBQUNJLG1CQUFtQixDQUFDLENBQUNGLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDbEVILE1BQU0sQ0FBQyxPQUFPSCxNQUFNLENBQUNJLE9BQU8sQ0FBQ0ssbUJBQW1CLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUNsRUgsTUFBTSxDQUFDLE9BQU9ILE1BQU0sQ0FBQ0ksT0FBTyxDQUFDTSxVQUFVLENBQUMsQ0FBQ0osSUFBSSxDQUFDLFVBQVUsQ0FBQztFQUMzRCxDQUFDLENBQUM7RUFFRlAsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLE1BQU07SUFDN0MsTUFBTTtNQUFFQztJQUFPLENBQUMsR0FBRyxJQUFBQyxpQkFBVSxFQUFDLE1BQU0sSUFBQUMsa0JBQVEsRUFBQyxDQUFDLENBQUM7SUFFL0MsSUFBQVMsVUFBRyxFQUFDLE1BQU07TUFDUlgsTUFBTSxDQUFDSSxPQUFPLENBQUNNLFVBQVUsQ0FBQyxDQUFDO0lBQzdCLENBQUMsQ0FBQztJQUVGUCxNQUFNLENBQUNILE1BQU0sQ0FBQ0ksT0FBTyxDQUFDQyxPQUFPLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztJQUV6QyxJQUFBSyxVQUFHLEVBQUMsTUFBTTtNQUNSWCxNQUFNLENBQUNJLE9BQU8sQ0FBQ00sVUFBVSxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDO0lBRUZQLE1BQU0sQ0FBQ0gsTUFBTSxDQUFDSSxPQUFPLENBQUNDLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDO0VBQzVDLENBQUMsQ0FBQztFQUVGUCxFQUFFLENBQUMsc0NBQXNDLEVBQUUsTUFBTTtJQUMvQyxNQUFNO01BQUVDO0lBQU8sQ0FBQyxHQUFHLElBQUFDLGlCQUFVLEVBQUMsTUFBTSxJQUFBQyxrQkFBUSxFQUFDLENBQUMsQ0FBQzs7SUFFL0M7SUFDQUMsTUFBTSxDQUFDUyxNQUFNLENBQUNDLFlBQVksQ0FBQyxDQUFDQyxnQkFBZ0IsQ0FBQyxDQUFDO0VBQ2hELENBQUMsQ0FBQztFQUVGZixFQUFFLENBQUMsbUNBQW1DLEVBQUUsTUFBTTtJQUM1QyxNQUFNO01BQUVDO0lBQU8sQ0FBQyxHQUFHLElBQUFDLGlCQUFVLEVBQUMsTUFBTSxJQUFBQyxrQkFBUSxFQUFDLENBQUMsQ0FBQztJQUUvQyxJQUFBUyxVQUFHLEVBQUMsTUFBTTtNQUNSWCxNQUFNLENBQUNJLE9BQU8sQ0FBQ00sVUFBVSxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDOztJQUVGO0lBQ0FQLE1BQU0sQ0FBQyxNQUFNO01BQ1gsSUFBQVEsVUFBRyxFQUFDLE1BQU07UUFDUlgsTUFBTSxDQUFDSSxPQUFPLENBQUNHLFFBQVEsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDO01BQ25DLENBQUMsQ0FBQztJQUNKLENBQUMsQ0FBQyxDQUFDUSxHQUFHLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0VBQ2xCLENBQUMsQ0FBQztFQUVGakIsRUFBRSxDQUFDLCtDQUErQyxFQUFFLE1BQU07SUFDeEQ7SUFDQWEsTUFBTSxDQUFDQyxZQUFZLEdBQUdoQixJQUFJLENBQUNvQixFQUFFLENBQUMsTUFBTTtNQUNsQyxNQUFNLElBQUlDLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQztJQUMvQyxDQUFDLENBQUM7SUFFRmYsTUFBTSxDQUFDLE1BQU07TUFDWCxJQUFBRixpQkFBVSxFQUFDLE1BQU0sSUFBQUMsa0JBQVEsRUFBQyxDQUFDLENBQUM7SUFDOUIsQ0FBQyxDQUFDLENBQUNhLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7RUFDbEIsQ0FBQyxDQUFDO0VBRUZqQixFQUFFLENBQUMseUNBQXlDLEVBQUUsTUFBTTtJQUNsRCxNQUFNb0IsU0FBUyxHQUFHdEIsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLENBQUM7SUFDM0JMLE1BQU0sQ0FBQ0MsWUFBWSxHQUFHaEIsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLE9BQU87TUFDbkNHLGdCQUFnQixFQUFFdkIsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLE9BQU87UUFDL0JJLE9BQU8sRUFBRXhCLElBQUksQ0FBQ29CLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCSyxLQUFLLEVBQUV6QixJQUFJLENBQUNvQixFQUFFLENBQUMsQ0FBQztRQUNoQk0sSUFBSSxFQUFFMUIsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLENBQUM7UUFDZk8sU0FBUyxFQUFFO1VBQUVDLGNBQWMsRUFBRTVCLElBQUksQ0FBQ29CLEVBQUUsQ0FBQyxDQUFDO1VBQUVTLDRCQUE0QixFQUFFN0IsSUFBSSxDQUFDb0IsRUFBRSxDQUFDO1FBQUUsQ0FBQztRQUNqRlUsSUFBSSxFQUFFO01BQ1IsQ0FBQyxDQUFDLENBQUM7TUFDSEMsVUFBVSxFQUFFL0IsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLE9BQU87UUFDekJJLE9BQU8sRUFBRXhCLElBQUksQ0FBQ29CLEVBQUUsQ0FBQyxDQUFDO1FBQ2xCWSxJQUFJLEVBQUU7VUFBRUosY0FBYyxFQUFFNUIsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLENBQUM7VUFBRVMsNEJBQTRCLEVBQUU3QixJQUFJLENBQUNvQixFQUFFLENBQUM7UUFBRTtNQUM3RSxDQUFDLENBQUMsQ0FBQztNQUNIYSxXQUFXLEVBQUUsQ0FBQyxDQUFDO01BQ2ZDLFdBQVcsRUFBRSxDQUFDO01BQ2RDLEtBQUssRUFBRSxTQUFTO01BQ2hCQyxNQUFNLEVBQUVwQyxJQUFJLENBQUNvQixFQUFFLENBQUMsTUFBTWlCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQztNQUN4Q0MsT0FBTyxFQUFFdkMsSUFBSSxDQUFDb0IsRUFBRSxDQUFDLE1BQU1pQixPQUFPLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUM7TUFDekNFLEtBQUssRUFBRWxCO0lBQ1QsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNO01BQUVtQjtJQUFRLENBQUMsR0FBRyxJQUFBckMsaUJBQVUsRUFBQyxNQUFNLElBQUFDLGtCQUFRLEVBQUMsQ0FBQyxDQUFDO0lBRWhEb0MsT0FBTyxDQUFDLENBQUM7SUFFVG5DLE1BQU0sQ0FBQ2dCLFNBQVMsQ0FBQyxDQUFDTCxnQkFBZ0IsQ0FBQyxDQUFDO0VBQ3RDLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==