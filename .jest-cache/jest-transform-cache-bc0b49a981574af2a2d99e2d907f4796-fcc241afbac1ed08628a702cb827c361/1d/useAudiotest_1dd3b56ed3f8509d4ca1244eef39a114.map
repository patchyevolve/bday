{"version":3,"names":["_react","require","_useAudio","describe","beforeEach","jest","clearAllMocks","it","result","renderHook","useAudio","expect","current","isMuted","toBe","playNote","playBackgroundMusic","stopBackgroundMusic","toggleMute","act","global","AudioContext","toHaveBeenCalled","not","toThrow","fn","Error","mockClose","createOscillator","connect","start","stop","frequency","setValueAtTime","exponentialRampToValueAtTime","type","createGain","gain","destination","currentTime","state","resume","Promise","resolve","suspend","close","unmount"],"sources":["useAudio.test.js"],"sourcesContent":["import { renderHook, act } from '@testing-library/react';\nimport { useAudio } from '../../hooks/useAudio';\n\ndescribe('useAudio Hook', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n  });\n\n  it('should initialize with correct default values', () => {\n    const { result } = renderHook(() => useAudio());\n\n    expect(result.current.isMuted).toBe(false);\n    expect(typeof result.current.playNote).toBe('function');\n    expect(typeof result.current.playBackgroundMusic).toBe('function');\n    expect(typeof result.current.stopBackgroundMusic).toBe('function');\n    expect(typeof result.current.toggleMute).toBe('function');\n  });\n\n  it('should toggle mute state correctly', () => {\n    const { result } = renderHook(() => useAudio());\n\n    act(() => {\n      result.current.toggleMute();\n    });\n\n    expect(result.current.isMuted).toBe(true);\n\n    act(() => {\n      result.current.toggleMute();\n    });\n\n    expect(result.current.isMuted).toBe(false);\n  });\n\n  it('should handle audio context creation', () => {\n    const { result } = renderHook(() => useAudio());\n\n    // Audio context should be created\n    expect(global.AudioContext).toHaveBeenCalled();\n  });\n\n  it('should not play sounds when muted', () => {\n    const { result } = renderHook(() => useAudio());\n\n    act(() => {\n      result.current.toggleMute();\n    });\n\n    // Should not throw when trying to play while muted\n    expect(() => {\n      act(() => {\n        result.current.playNote(440, 0.5);\n      });\n    }).not.toThrow();\n  });\n\n  it('should handle audio context errors gracefully', () => {\n    // Mock AudioContext to throw error\n    global.AudioContext = jest.fn(() => {\n      throw new Error('AudioContext not supported');\n    });\n\n    expect(() => {\n      renderHook(() => useAudio());\n    }).not.toThrow();\n  });\n\n  it('should cleanup audio context on unmount', () => {\n    const mockClose = jest.fn();\n    global.AudioContext = jest.fn(() => ({\n      createOscillator: jest.fn(() => ({\n        connect: jest.fn(),\n        start: jest.fn(),\n        stop: jest.fn(),\n        frequency: { setValueAtTime: jest.fn(), exponentialRampToValueAtTime: jest.fn() },\n        type: 'sine'\n      })),\n      createGain: jest.fn(() => ({\n        connect: jest.fn(),\n        gain: { setValueAtTime: jest.fn(), exponentialRampToValueAtTime: jest.fn() }\n      })),\n      destination: {},\n      currentTime: 0,\n      state: 'running',\n      resume: jest.fn(() => Promise.resolve()),\n      suspend: jest.fn(() => Promise.resolve()),\n      close: mockClose\n    }));\n\n    const { unmount } = renderHook(() => useAudio());\n\n    unmount();\n\n    expect(mockClose).toHaveBeenCalled();\n  });\n});\n"],"mappings":";;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,SAAA,GAAAD,OAAA;AAEAE,QAAQ,CAAC,eAAe,EAAE,MAAM;EAC9BC,UAAU,CAAC,MAAM;IACfC,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,+CAA+C,EAAE,MAAM;IACxD,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAAC,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;IAE/CC,MAAM,CAACH,MAAM,CAACI,OAAO,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC;IAC1CH,MAAM,CAAC,OAAOH,MAAM,CAACI,OAAO,CAACG,QAAQ,CAAC,CAACD,IAAI,CAAC,UAAU,CAAC;IACvDH,MAAM,CAAC,OAAOH,MAAM,CAACI,OAAO,CAACI,mBAAmB,CAAC,CAACF,IAAI,CAAC,UAAU,CAAC;IAClEH,MAAM,CAAC,OAAOH,MAAM,CAACI,OAAO,CAACK,mBAAmB,CAAC,CAACH,IAAI,CAAC,UAAU,CAAC;IAClEH,MAAM,CAAC,OAAOH,MAAM,CAACI,OAAO,CAACM,UAAU,CAAC,CAACJ,IAAI,CAAC,UAAU,CAAC;EAC3D,CAAC,CAAC;EAEFP,EAAE,CAAC,oCAAoC,EAAE,MAAM;IAC7C,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAAC,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;IAE/C,IAAAS,UAAG,EAAC,MAAM;MACRX,MAAM,CAACI,OAAO,CAACM,UAAU,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEFP,MAAM,CAACH,MAAM,CAACI,OAAO,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC;IAEzC,IAAAK,UAAG,EAAC,MAAM;MACRX,MAAM,CAACI,OAAO,CAACM,UAAU,CAAC,CAAC;IAC7B,CAAC,CAAC;IAEFP,MAAM,CAACH,MAAM,CAACI,OAAO,CAACC,OAAO,CAAC,CAACC,IAAI,CAAC,KAAK,CAAC;EAC5C,CAAC,CAAC;EAEFP,EAAE,CAAC,sCAAsC,EAAE,MAAM;IAC/C,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAAC,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;;IAE/C;IACAC,MAAM,CAACS,MAAM,CAACC,YAAY,CAAC,CAACC,gBAAgB,CAAC,CAAC;EAChD,CAAC,CAAC;EAEFf,EAAE,CAAC,mCAAmC,EAAE,MAAM;IAC5C,MAAM;MAAEC;IAAO,CAAC,GAAG,IAAAC,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;IAE/C,IAAAS,UAAG,EAAC,MAAM;MACRX,MAAM,CAACI,OAAO,CAACM,UAAU,CAAC,CAAC;IAC7B,CAAC,CAAC;;IAEF;IACAP,MAAM,CAAC,MAAM;MACX,IAAAQ,UAAG,EAAC,MAAM;QACRX,MAAM,CAACI,OAAO,CAACG,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC;MACnC,CAAC,CAAC;IACJ,CAAC,CAAC,CAACQ,GAAG,CAACC,OAAO,CAAC,CAAC;EAClB,CAAC,CAAC;EAEFjB,EAAE,CAAC,+CAA+C,EAAE,MAAM;IACxD;IACAa,MAAM,CAACC,YAAY,GAAGhB,IAAI,CAACoB,EAAE,CAAC,MAAM;MAClC,MAAM,IAAIC,KAAK,CAAC,4BAA4B,CAAC;IAC/C,CAAC,CAAC;IAEFf,MAAM,CAAC,MAAM;MACX,IAAAF,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAACa,GAAG,CAACC,OAAO,CAAC,CAAC;EAClB,CAAC,CAAC;EAEFjB,EAAE,CAAC,yCAAyC,EAAE,MAAM;IAClD,MAAMoB,SAAS,GAAGtB,IAAI,CAACoB,EAAE,CAAC,CAAC;IAC3BL,MAAM,CAACC,YAAY,GAAGhB,IAAI,CAACoB,EAAE,CAAC,OAAO;MACnCG,gBAAgB,EAAEvB,IAAI,CAACoB,EAAE,CAAC,OAAO;QAC/BI,OAAO,EAAExB,IAAI,CAACoB,EAAE,CAAC,CAAC;QAClBK,KAAK,EAAEzB,IAAI,CAACoB,EAAE,CAAC,CAAC;QAChBM,IAAI,EAAE1B,IAAI,CAACoB,EAAE,CAAC,CAAC;QACfO,SAAS,EAAE;UAAEC,cAAc,EAAE5B,IAAI,CAACoB,EAAE,CAAC,CAAC;UAAES,4BAA4B,EAAE7B,IAAI,CAACoB,EAAE,CAAC;QAAE,CAAC;QACjFU,IAAI,EAAE;MACR,CAAC,CAAC,CAAC;MACHC,UAAU,EAAE/B,IAAI,CAACoB,EAAE,CAAC,OAAO;QACzBI,OAAO,EAAExB,IAAI,CAACoB,EAAE,CAAC,CAAC;QAClBY,IAAI,EAAE;UAAEJ,cAAc,EAAE5B,IAAI,CAACoB,EAAE,CAAC,CAAC;UAAES,4BAA4B,EAAE7B,IAAI,CAACoB,EAAE,CAAC;QAAE;MAC7E,CAAC,CAAC,CAAC;MACHa,WAAW,EAAE,CAAC,CAAC;MACfC,WAAW,EAAE,CAAC;MACdC,KAAK,EAAE,SAAS;MAChBC,MAAM,EAAEpC,IAAI,CAACoB,EAAE,CAAC,MAAMiB,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC;MACxCC,OAAO,EAAEvC,IAAI,CAACoB,EAAE,CAAC,MAAMiB,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC;MACzCE,KAAK,EAAElB;IACT,CAAC,CAAC,CAAC;IAEH,MAAM;MAAEmB;IAAQ,CAAC,GAAG,IAAArC,iBAAU,EAAC,MAAM,IAAAC,kBAAQ,EAAC,CAAC,CAAC;IAEhDoC,OAAO,CAAC,CAAC;IAETnC,MAAM,CAACgB,SAAS,CAAC,CAACL,gBAAgB,CAAC,CAAC;EACtC,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}