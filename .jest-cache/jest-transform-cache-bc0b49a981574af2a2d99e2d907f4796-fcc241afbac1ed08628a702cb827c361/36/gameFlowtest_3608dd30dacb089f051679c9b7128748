668b3df56d05a066cf142870d5a6b171
"use strict";

// Mock dependencies
_getJestObj().mock('../../utils/mediaLoader');
_getJestObj().mock('../../store/celebrationStore');
var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _App = _interopRequireDefault(require("../../App"));
var _jsxRuntime = require("react/jsx-runtime");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
describe('Game Flow Integration Tests', () => {
  beforeEach(() => {
    jest.useFakeTimers();
    jest.clearAllMocks();
  });
  afterEach(() => {
    jest.runOnlyPendingTimers();
    jest.useRealTimers();
  });
  describe('Complete Game Flow', () => {
    it('should complete full game cycle: welcome -> game -> celebration -> galleries', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // 1. Welcome Screen
      expect(_react2.screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();

      // 2. Start Game
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
      });

      // 3. Game Screen
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.getByText(/Score:/)).toBeInTheDocument();
        expect(_react2.screen.getByText(/Lives:/)).toBeInTheDocument();
      });

      // 4. Simulate game completion
      (0, _react2.act)(() => {
        jest.advanceTimersByTime(10000);
      });

      // 5. Celebration Screen with Galleries
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.getByText('Photo Gallery')).toBeInTheDocument();
        expect(_react2.screen.getByText('Video Gallery')).toBeInTheDocument();
      });
    });
    it('should handle game restart correctly', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // Complete one game cycle
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
      });
      (0, _react2.act)(() => {
        jest.advanceTimersByTime(10000);
      });

      // Should be able to restart
      await (0, _react2.waitFor)(() => {
        const restartButton = _react2.screen.queryByText(/Play Again|Restart/);
        if (restartButton) {
          _react2.fireEvent.click(restartButton);
        }
      });
    });
  });
  describe('Gallery Integration', () => {
    it('should open and close photo gallery', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // Navigate to celebration
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
      });
      (0, _react2.act)(() => {
        jest.advanceTimersByTime(10000);
      });

      // Open photo gallery
      await (0, _react2.waitFor)(() => {
        const photoButton = _react2.screen.getByText('Photo Gallery');
        _react2.fireEvent.click(photoButton);
      });

      // Should show gallery modal
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.getByText('ðŸ“¸')).toBeInTheDocument();
      });

      // Close gallery
      const closeButton = _react2.screen.getByRole('button', {
        name: /close|Ã—/
      });
      _react2.fireEvent.click(closeButton);

      // Should return to celebration screen
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.queryByText('ðŸ“¸')).not.toBeInTheDocument();
      });
    });
    it('should open and close video gallery', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // Navigate to celebration
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
      });
      (0, _react2.act)(() => {
        jest.advanceTimersByTime(10000);
      });

      // Open video gallery
      await (0, _react2.waitFor)(() => {
        const videoButton = _react2.screen.getByText('Video Gallery');
        _react2.fireEvent.click(videoButton);
      });

      // Should show gallery modal
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.getByText('ðŸŽ¥')).toBeInTheDocument();
      });
    });
  });
  describe('Audio Integration', () => {
    it('should handle mute/unmute throughout game flow', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // Start game
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
      });

      // Find and test mute button
      await (0, _react2.waitFor)(() => {
        const muteButton = _react2.screen.getByRole('button', {
          name: /ðŸ”Š|ðŸ”‡/
        });

        // Toggle mute
        _react2.fireEvent.click(muteButton);
        _react2.fireEvent.click(muteButton);
        expect(muteButton).toBeInTheDocument();
      });
    });
  });
  describe('Performance Integration', () => {
    it('should handle rapid user interactions', async () => {
      (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');

      // Rapid clicks shouldn't break the app
      await (0, _react2.act)(async () => {
        _react2.fireEvent.click(startButton);
        _react2.fireEvent.click(startButton);
        _react2.fireEvent.click(startButton);
      });

      // Should still work normally
      await (0, _react2.waitFor)(() => {
        expect(_react2.screen.getByText(/Score:/)).toBeInTheDocument();
      });
    });
    it('should handle timer cleanup on unmount', () => {
      const {
        unmount
      } = (0, _react2.render)(/*#__PURE__*/(0, _jsxRuntime.jsx)(_App.default, {}));

      // Start some timers
      const startButton = _react2.screen.getByText('ðŸŽµ Start Playing');
      (0, _react2.act)(() => {
        _react2.fireEvent.click(startButton);
      });

      // Unmount should not cause memory leaks
      expect(() => unmount()).not.toThrow();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfQXBwIiwiX2pzeFJ1bnRpbWUiLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJqZXN0IiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwidXNlRmFrZVRpbWVycyIsImNsZWFyQWxsTW9ja3MiLCJhZnRlckVhY2giLCJydW5Pbmx5UGVuZGluZ1RpbWVycyIsInVzZVJlYWxUaW1lcnMiLCJpdCIsInJlbmRlciIsImpzeCIsImV4cGVjdCIsInNjcmVlbiIsImdldEJ5VGV4dCIsInRvQmVJblRoZURvY3VtZW50Iiwic3RhcnRCdXR0b24iLCJhY3QiLCJmaXJlRXZlbnQiLCJjbGljayIsIndhaXRGb3IiLCJhZHZhbmNlVGltZXJzQnlUaW1lIiwicmVzdGFydEJ1dHRvbiIsInF1ZXJ5QnlUZXh0IiwicGhvdG9CdXR0b24iLCJjbG9zZUJ1dHRvbiIsImdldEJ5Um9sZSIsIm5hbWUiLCJub3QiLCJ2aWRlb0J1dHRvbiIsIm11dGVCdXR0b24iLCJ1bm1vdW50IiwidG9UaHJvdyJdLCJzb3VyY2VzIjpbImdhbWVGbG93LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHJlbmRlciwgc2NyZWVuLCBmaXJlRXZlbnQsIHdhaXRGb3IsIGFjdCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IEJpcnRoZGF5UGlhbm9TdXJwcmlzZSBmcm9tICcuLi8uLi9BcHAnO1xuXG4vLyBNb2NrIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKCcuLi8uLi91dGlscy9tZWRpYUxvYWRlcicpO1xuamVzdC5tb2NrKCcuLi8uLi9zdG9yZS9jZWxlYnJhdGlvblN0b3JlJyk7XG5cbmRlc2NyaWJlKCdHYW1lIEZsb3cgSW50ZWdyYXRpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QucnVuT25seVBlbmRpbmdUaW1lcnMoKTtcbiAgICBqZXN0LnVzZVJlYWxUaW1lcnMoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbXBsZXRlIEdhbWUgRmxvdycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNvbXBsZXRlIGZ1bGwgZ2FtZSBjeWNsZTogd2VsY29tZSAtPiBnYW1lIC0+IGNlbGVicmF0aW9uIC0+IGdhbGxlcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QmlydGhkYXlQaWFub1N1cnByaXNlIC8+KTtcbiAgICAgIFxuICAgICAgLy8gMS4gV2VsY29tZSBTY3JlZW5cbiAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCfwn46JIEhBUFBZIEJJUlRIREFZISDwn46JJykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICBcbiAgICAgIC8vIDIuIFN0YXJ0IEdhbWVcbiAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn8J+OtSBTdGFydCBQbGF5aW5nJyk7XG4gICAgICBhd2FpdCBhY3QoYXN5bmMgKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2soc3RhcnRCdXR0b24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDMuIEdhbWUgU2NyZWVuXG4gICAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgICAgZXhwZWN0KHNjcmVlbi5nZXRCeVRleHQoL1Njb3JlOi8pKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgvTGl2ZXM6LykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gNC4gU2ltdWxhdGUgZ2FtZSBjb21wbGV0aW9uXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTAwMDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIDUuIENlbGVicmF0aW9uIFNjcmVlbiB3aXRoIEdhbGxlcmllc1xuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdQaG90byBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KCdWaWRlbyBHYWxsZXJ5JykpLnRvQmVJblRoZURvY3VtZW50KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGdhbWUgcmVzdGFydCBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEJpcnRoZGF5UGlhbm9TdXJwcmlzZSAvPik7XG4gICAgICBcbiAgICAgIC8vIENvbXBsZXRlIG9uZSBnYW1lIGN5Y2xlXG4gICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ/CfjrUgU3RhcnQgUGxheWluZycpO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTAwMDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBiZSBhYmxlIHRvIHJlc3RhcnRcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gc2NyZWVuLnF1ZXJ5QnlUZXh0KC9QbGF5IEFnYWlufFJlc3RhcnQvKTtcbiAgICAgICAgaWYgKHJlc3RhcnRCdXR0b24pIHtcbiAgICAgICAgICBmaXJlRXZlbnQuY2xpY2socmVzdGFydEJ1dHRvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR2FsbGVyeSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG9wZW4gYW5kIGNsb3NlIHBob3RvIGdhbGxlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEJpcnRoZGF5UGlhbm9TdXJwcmlzZSAvPik7XG4gICAgICBcbiAgICAgIC8vIE5hdmlnYXRlIHRvIGNlbGVicmF0aW9uXG4gICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ/CfjrUgU3RhcnQgUGxheWluZycpO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTAwMDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE9wZW4gcGhvdG8gZ2FsbGVyeVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBob3RvQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnUGhvdG8gR2FsbGVyeScpO1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2socGhvdG9CdXR0b24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBzaG93IGdhbGxlcnkgbW9kYWxcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+TuCcpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIENsb3NlIGdhbGxlcnlcbiAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gc2NyZWVuLmdldEJ5Um9sZSgnYnV0dG9uJywgeyBuYW1lOiAvY2xvc2V8w5cvIH0pO1xuICAgICAgZmlyZUV2ZW50LmNsaWNrKGNsb3NlQnV0dG9uKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIHJldHVybiB0byBjZWxlYnJhdGlvbiBzY3JlZW5cbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLnF1ZXJ5QnlUZXh0KCfwn5O4JykpLm5vdC50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG9wZW4gYW5kIGNsb3NlIHZpZGVvIGdhbGxlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEJpcnRoZGF5UGlhbm9TdXJwcmlzZSAvPik7XG4gICAgICBcbiAgICAgIC8vIE5hdmlnYXRlIHRvIGNlbGVicmF0aW9uXG4gICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ/CfjrUgU3RhcnQgUGxheWluZycpO1xuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBqZXN0LmFkdmFuY2VUaW1lcnNCeVRpbWUoMTAwMDApO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIE9wZW4gdmlkZW8gZ2FsbGVyeVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZGVvQnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgnVmlkZW8gR2FsbGVyeScpO1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sodmlkZW9CdXR0b24pO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBzaG93IGdhbGxlcnkgbW9kYWxcbiAgICAgIGF3YWl0IHdhaXRGb3IoKCkgPT4ge1xuICAgICAgICBleHBlY3Qoc2NyZWVuLmdldEJ5VGV4dCgn8J+OpScpKS50b0JlSW5UaGVEb2N1bWVudCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdBdWRpbyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdXRlL3VubXV0ZSB0aHJvdWdob3V0IGdhbWUgZmxvdycsIGFzeW5jICgpID0+IHtcbiAgICAgIHJlbmRlcig8QmlydGhkYXlQaWFub1N1cnByaXNlIC8+KTtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgZ2FtZVxuICAgICAgY29uc3Qgc3RhcnRCdXR0b24gPSBzY3JlZW4uZ2V0QnlUZXh0KCfwn461IFN0YXJ0IFBsYXlpbmcnKTtcbiAgICAgIGF3YWl0IGFjdChhc3luYyAoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhzdGFydEJ1dHRvbik7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRmluZCBhbmQgdGVzdCBtdXRlIGJ1dHRvblxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGNvbnN0IG11dGVCdXR0b24gPSBzY3JlZW4uZ2V0QnlSb2xlKCdidXR0b24nLCB7IG5hbWU6IC/wn5SKfPCflIcvIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVG9nZ2xlIG11dGVcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKG11dGVCdXR0b24pO1xuICAgICAgICBmaXJlRXZlbnQuY2xpY2sobXV0ZUJ1dHRvbik7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QobXV0ZUJ1dHRvbikudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgSW50ZWdyYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcmFwaWQgdXNlciBpbnRlcmFjdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICByZW5kZXIoPEJpcnRoZGF5UGlhbm9TdXJwcmlzZSAvPik7XG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gc2NyZWVuLmdldEJ5VGV4dCgn8J+OtSBTdGFydCBQbGF5aW5nJyk7XG4gICAgICBcbiAgICAgIC8vIFJhcGlkIGNsaWNrcyBzaG91bGRuJ3QgYnJlYWsgdGhlIGFwcFxuICAgICAgYXdhaXQgYWN0KGFzeW5jICgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgc3RpbGwgd29yayBub3JtYWxseVxuICAgICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICAgIGV4cGVjdChzY3JlZW4uZ2V0QnlUZXh0KC9TY29yZTovKSkudG9CZUluVGhlRG9jdW1lbnQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdGltZXIgY2xlYW51cCBvbiB1bm1vdW50JywgKCkgPT4ge1xuICAgICAgY29uc3QgeyB1bm1vdW50IH0gPSByZW5kZXIoPEJpcnRoZGF5UGlhbm9TdXJwcmlzZSAvPik7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHNvbWUgdGltZXJzXG4gICAgICBjb25zdCBzdGFydEJ1dHRvbiA9IHNjcmVlbi5nZXRCeVRleHQoJ/CfjrUgU3RhcnQgUGxheWluZycpO1xuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKHN0YXJ0QnV0dG9uKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBVbm1vdW50IHNob3VsZCBub3QgY2F1c2UgbWVtb3J5IGxlYWtzXG4gICAgICBleHBlY3QoKCkgPT4gdW5tb3VudCgpKS5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUlBO0FBQ0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHlCQUF5QixDQUFDO0FBQ3BDRCxXQUFBLEdBQUtDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQztBQU56QyxJQUFBQyxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxJQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFBOEMsSUFBQUcsV0FBQSxHQUFBSCxPQUFBO0FBQUEsU0FBQUQsdUJBQUFLLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFBQSxTQUFBUixZQUFBO0VBQUE7SUFBQVc7RUFBQSxJQUFBUCxPQUFBO0VBQUFKLFdBQUEsR0FBQUEsQ0FBQSxLQUFBVyxJQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBTTlDQyxRQUFRLENBQUMsNkJBQTZCLEVBQUUsTUFBTTtFQUM1Q0MsVUFBVSxDQUFDLE1BQU07SUFDZkYsSUFBSSxDQUFDRyxhQUFhLENBQUMsQ0FBQztJQUNwQkgsSUFBSSxDQUFDSSxhQUFhLENBQUMsQ0FBQztFQUN0QixDQUFDLENBQUM7RUFFRkMsU0FBUyxDQUFDLE1BQU07SUFDZEwsSUFBSSxDQUFDTSxvQkFBb0IsQ0FBQyxDQUFDO0lBQzNCTixJQUFJLENBQUNPLGFBQWEsQ0FBQyxDQUFDO0VBQ3RCLENBQUMsQ0FBQztFQUVGTixRQUFRLENBQUMsb0JBQW9CLEVBQUUsTUFBTTtJQUNuQ08sRUFBRSxDQUFDLDhFQUE4RSxFQUFFLFlBQVk7TUFDN0YsSUFBQUMsY0FBTSxlQUFDLElBQUFiLFdBQUEsQ0FBQWMsR0FBQSxFQUFDZixJQUFBLENBQUFJLE9BQXFCLElBQUUsQ0FBQyxDQUFDOztNQUVqQztNQUNBWSxNQUFNLENBQUNDLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLHVCQUF1QixDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQzs7TUFFckU7TUFDQSxNQUFNQyxXQUFXLEdBQUdILGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGtCQUFrQixDQUFDO01BQ3hELE1BQU0sSUFBQUcsV0FBRyxFQUFDLFlBQVk7UUFDcEJDLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0gsV0FBVyxDQUFDO01BQzlCLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU0sSUFBQUksZUFBTyxFQUFDLE1BQU07UUFDbEJSLE1BQU0sQ0FBQ0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztRQUN0REgsTUFBTSxDQUFDQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO01BQ3hELENBQUMsQ0FBQzs7TUFFRjtNQUNBLElBQUFFLFdBQUcsRUFBQyxNQUFNO1FBQ1JoQixJQUFJLENBQUNvQixtQkFBbUIsQ0FBQyxLQUFLLENBQUM7TUFDakMsQ0FBQyxDQUFDOztNQUVGO01BQ0EsTUFBTSxJQUFBRCxlQUFPLEVBQUMsTUFBTTtRQUNsQlIsTUFBTSxDQUFDQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzdESCxNQUFNLENBQUNDLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7TUFDL0QsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZOLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxZQUFZO01BQ3JELElBQUFDLGNBQU0sZUFBQyxJQUFBYixXQUFBLENBQUFjLEdBQUEsRUFBQ2YsSUFBQSxDQUFBSSxPQUFxQixJQUFFLENBQUMsQ0FBQzs7TUFFakM7TUFDQSxNQUFNZ0IsV0FBVyxHQUFHSCxjQUFNLENBQUNDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztNQUN4RCxNQUFNLElBQUFHLFdBQUcsRUFBQyxZQUFZO1FBQ3BCQyxpQkFBUyxDQUFDQyxLQUFLLENBQUNILFdBQVcsQ0FBQztNQUM5QixDQUFDLENBQUM7TUFFRixJQUFBQyxXQUFHLEVBQUMsTUFBTTtRQUNSaEIsSUFBSSxDQUFDb0IsbUJBQW1CLENBQUMsS0FBSyxDQUFDO01BQ2pDLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU0sSUFBQUQsZUFBTyxFQUFDLE1BQU07UUFDbEIsTUFBTUUsYUFBYSxHQUFHVCxjQUFNLENBQUNVLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQztRQUM5RCxJQUFJRCxhQUFhLEVBQUU7VUFDakJKLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0csYUFBYSxDQUFDO1FBQ2hDO01BQ0YsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZwQixRQUFRLENBQUMscUJBQXFCLEVBQUUsTUFBTTtJQUNwQ08sRUFBRSxDQUFDLHFDQUFxQyxFQUFFLFlBQVk7TUFDcEQsSUFBQUMsY0FBTSxlQUFDLElBQUFiLFdBQUEsQ0FBQWMsR0FBQSxFQUFDZixJQUFBLENBQUFJLE9BQXFCLElBQUUsQ0FBQyxDQUFDOztNQUVqQztNQUNBLE1BQU1nQixXQUFXLEdBQUdILGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGtCQUFrQixDQUFDO01BQ3hELE1BQU0sSUFBQUcsV0FBRyxFQUFDLFlBQVk7UUFDcEJDLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0gsV0FBVyxDQUFDO01BQzlCLENBQUMsQ0FBQztNQUVGLElBQUFDLFdBQUcsRUFBQyxNQUFNO1FBQ1JoQixJQUFJLENBQUNvQixtQkFBbUIsQ0FBQyxLQUFLLENBQUM7TUFDakMsQ0FBQyxDQUFDOztNQUVGO01BQ0EsTUFBTSxJQUFBRCxlQUFPLEVBQUMsTUFBTTtRQUNsQixNQUFNSSxXQUFXLEdBQUdYLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLGVBQWUsQ0FBQztRQUNyREksaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDSyxXQUFXLENBQUM7TUFDOUIsQ0FBQyxDQUFDOztNQUVGO01BQ0EsTUFBTSxJQUFBSixlQUFPLEVBQUMsTUFBTTtRQUNsQlIsTUFBTSxDQUFDQyxjQUFNLENBQUNDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDO01BQ3BELENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU1VLFdBQVcsR0FBR1osY0FBTSxDQUFDYSxTQUFTLENBQUMsUUFBUSxFQUFFO1FBQUVDLElBQUksRUFBRTtNQUFVLENBQUMsQ0FBQztNQUNuRVQsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDTSxXQUFXLENBQUM7O01BRTVCO01BQ0EsTUFBTSxJQUFBTCxlQUFPLEVBQUMsTUFBTTtRQUNsQlIsTUFBTSxDQUFDQyxjQUFNLENBQUNVLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDSyxHQUFHLENBQUNiLGlCQUFpQixDQUFDLENBQUM7TUFDMUQsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZOLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxZQUFZO01BQ3BELElBQUFDLGNBQU0sZUFBQyxJQUFBYixXQUFBLENBQUFjLEdBQUEsRUFBQ2YsSUFBQSxDQUFBSSxPQUFxQixJQUFFLENBQUMsQ0FBQzs7TUFFakM7TUFDQSxNQUFNZ0IsV0FBVyxHQUFHSCxjQUFNLENBQUNDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztNQUN4RCxNQUFNLElBQUFHLFdBQUcsRUFBQyxZQUFZO1FBQ3BCQyxpQkFBUyxDQUFDQyxLQUFLLENBQUNILFdBQVcsQ0FBQztNQUM5QixDQUFDLENBQUM7TUFFRixJQUFBQyxXQUFHLEVBQUMsTUFBTTtRQUNSaEIsSUFBSSxDQUFDb0IsbUJBQW1CLENBQUMsS0FBSyxDQUFDO01BQ2pDLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU0sSUFBQUQsZUFBTyxFQUFDLE1BQU07UUFDbEIsTUFBTVMsV0FBVyxHQUFHaEIsY0FBTSxDQUFDQyxTQUFTLENBQUMsZUFBZSxDQUFDO1FBQ3JESSxpQkFBUyxDQUFDQyxLQUFLLENBQUNVLFdBQVcsQ0FBQztNQUM5QixDQUFDLENBQUM7O01BRUY7TUFDQSxNQUFNLElBQUFULGVBQU8sRUFBQyxNQUFNO1FBQ2xCUixNQUFNLENBQUNDLGNBQU0sQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7TUFDcEQsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZiLFFBQVEsQ0FBQyxtQkFBbUIsRUFBRSxNQUFNO0lBQ2xDTyxFQUFFLENBQUMsZ0RBQWdELEVBQUUsWUFBWTtNQUMvRCxJQUFBQyxjQUFNLGVBQUMsSUFBQWIsV0FBQSxDQUFBYyxHQUFBLEVBQUNmLElBQUEsQ0FBQUksT0FBcUIsSUFBRSxDQUFDLENBQUM7O01BRWpDO01BQ0EsTUFBTWdCLFdBQVcsR0FBR0gsY0FBTSxDQUFDQyxTQUFTLENBQUMsa0JBQWtCLENBQUM7TUFDeEQsTUFBTSxJQUFBRyxXQUFHLEVBQUMsWUFBWTtRQUNwQkMsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDSCxXQUFXLENBQUM7TUFDOUIsQ0FBQyxDQUFDOztNQUVGO01BQ0EsTUFBTSxJQUFBSSxlQUFPLEVBQUMsTUFBTTtRQUNsQixNQUFNVSxVQUFVLEdBQUdqQixjQUFNLENBQUNhLFNBQVMsQ0FBQyxRQUFRLEVBQUU7VUFBRUMsSUFBSSxFQUFFO1FBQVEsQ0FBQyxDQUFDOztRQUVoRTtRQUNBVCxpQkFBUyxDQUFDQyxLQUFLLENBQUNXLFVBQVUsQ0FBQztRQUMzQlosaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDVyxVQUFVLENBQUM7UUFFM0JsQixNQUFNLENBQUNrQixVQUFVLENBQUMsQ0FBQ2YsaUJBQWlCLENBQUMsQ0FBQztNQUN4QyxDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRmIsUUFBUSxDQUFDLHlCQUF5QixFQUFFLE1BQU07SUFDeENPLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxZQUFZO01BQ3RELElBQUFDLGNBQU0sZUFBQyxJQUFBYixXQUFBLENBQUFjLEdBQUEsRUFBQ2YsSUFBQSxDQUFBSSxPQUFxQixJQUFFLENBQUMsQ0FBQztNQUVqQyxNQUFNZ0IsV0FBVyxHQUFHSCxjQUFNLENBQUNDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQzs7TUFFeEQ7TUFDQSxNQUFNLElBQUFHLFdBQUcsRUFBQyxZQUFZO1FBQ3BCQyxpQkFBUyxDQUFDQyxLQUFLLENBQUNILFdBQVcsQ0FBQztRQUM1QkUsaUJBQVMsQ0FBQ0MsS0FBSyxDQUFDSCxXQUFXLENBQUM7UUFDNUJFLGlCQUFTLENBQUNDLEtBQUssQ0FBQ0gsV0FBVyxDQUFDO01BQzlCLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU0sSUFBQUksZUFBTyxFQUFDLE1BQU07UUFDbEJSLE1BQU0sQ0FBQ0MsY0FBTSxDQUFDQyxTQUFTLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztNQUN4RCxDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRk4sRUFBRSxDQUFDLHdDQUF3QyxFQUFFLE1BQU07TUFDakQsTUFBTTtRQUFFc0I7TUFBUSxDQUFDLEdBQUcsSUFBQXJCLGNBQU0sZUFBQyxJQUFBYixXQUFBLENBQUFjLEdBQUEsRUFBQ2YsSUFBQSxDQUFBSSxPQUFxQixJQUFFLENBQUMsQ0FBQzs7TUFFckQ7TUFDQSxNQUFNZ0IsV0FBVyxHQUFHSCxjQUFNLENBQUNDLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztNQUN4RCxJQUFBRyxXQUFHLEVBQUMsTUFBTTtRQUNSQyxpQkFBUyxDQUFDQyxLQUFLLENBQUNILFdBQVcsQ0FBQztNQUM5QixDQUFDLENBQUM7O01BRUY7TUFDQUosTUFBTSxDQUFDLE1BQU1tQixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNILEdBQUcsQ0FBQ0ksT0FBTyxDQUFDLENBQUM7SUFDdkMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119