{"version":3,"names":["_getJestObj","mock","loadMediaFiles","jest","fn","Promise","resolve","pictures","id","url","alt","filename","videos","__esModule","default","setName","setMessage","_react","_interopRequireDefault","require","_react2","_App","_jsxRuntime","e","describe","beforeEach","clearAllMocks","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","it","render","jsx","expect","screen","getByText","toBeInTheDocument","waitFor","toHaveBeenCalledTimes","queryByText","not","startButton","fireEvent","click","getByRole","name","act","advanceTimersByTime","photoGalleryButton","findByText","muteButton","findByRole","Object","defineProperty","window","writable","configurable","value","mockRejectedValueOnce","Error","consoleSpy","spyOn","console","mockImplementation","toHaveBeenCalledWith","any","mockRestore","global","AudioContext","toThrow"],"sources":["App.test.js"],"sourcesContent":["import React from 'react';\nimport { render, screen, fireEvent, waitFor, act } from '@testing-library/react';\nimport BirthdayPianoSurprise from '../../App';\n\n// Mock the media loader\njest.mock('../../utils/mediaLoader', () => ({\n  loadMediaFiles: jest.fn(() => Promise.resolve({\n    pictures: [\n      { id: 1, url: '/media/pictures/test1.jpg', alt: 'Memory 1', filename: 'test1.jpg' },\n      { id: 2, url: '/media/pictures/test2.jpg', alt: 'Memory 2', filename: 'test2.jpg' }\n    ],\n    videos: [\n      { id: 1, url: '/media/videos/test.mp4', alt: 'Video 1', filename: 'test.mp4' }\n    ]\n  }))\n}));\n\n// Mock the celebration store\njest.mock('../../store/celebrationStore', () => ({\n  __esModule: true,\n  default: () => ({\n    setName: jest.fn(),\n    setMessage: jest.fn()\n  })\n}));\n\ndescribe('BirthdayPianoSurprise App', () => {\n  beforeEach(() => {\n    jest.clearAllMocks();\n    jest.useFakeTimers();\n  });\n\n  afterEach(() => {\n    jest.runOnlyPendingTimers();\n    jest.useRealTimers();\n  });\n\n  describe('Initial Render', () => {\n    it('should render welcome screen initially', () => {\n      render(<BirthdayPianoSurprise />);\n      \n      expect(screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();\n      expect(screen.getByText('To My Beautiful Wifey')).toBeInTheDocument();\n    });\n\n    it('should load media files on mount', async () => {\n      const { loadMediaFiles } = require('../../utils/mediaLoader');\n      \n      render(<BirthdayPianoSurprise />);\n      \n      await waitFor(() => {\n        expect(loadMediaFiles).toHaveBeenCalledTimes(1);\n      });\n    });\n\n    it('should initialize with correct default state', () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Should show welcome screen, not game or celebration\n      expect(screen.queryByText('Score:')).not.toBeInTheDocument();\n      expect(screen.queryByText('Lives:')).not.toBeInTheDocument();\n    });\n  });\n\n  describe('Game Flow', () => {\n    it('should start game when start button is clicked', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      // Should show game UI\n      await waitFor(() => {\n        expect(screen.getByText(/Score:/)).toBeInTheDocument();\n      });\n      \n      await waitFor(() => {\n        expect(screen.getByText(/Lives:/)).toBeInTheDocument();\n      });\n    });\n\n    it('should show mute button in game', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      await waitFor(() => {\n        expect(screen.getByRole('button', { name: /ðŸ”Š|ðŸ”‡/ })).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Media Galleries', () => {\n    it('should show photo gallery button after game completion', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Start and complete game (simplified)\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      // Fast forward to trigger celebration\n      act(() => {\n        jest.advanceTimersByTime(5000);\n      });\n      \n      await waitFor(() => {\n        expect(screen.getByText('Photo Gallery')).toBeInTheDocument();\n      });\n    });\n\n    it('should show video gallery button after game completion', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Start and complete game (simplified)\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      // Fast forward to trigger celebration\n      act(() => {\n        jest.advanceTimersByTime(5000);\n      });\n      \n      await waitFor(() => {\n        expect(screen.getByText('Video Gallery')).toBeInTheDocument();\n      });\n    });\n\n    it('should open photo gallery modal when clicked', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Navigate to celebration screen\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      act(() => {\n        jest.advanceTimersByTime(5000);\n      });\n      \n      const photoGalleryButton = await screen.findByText('Photo Gallery');\n      fireEvent.click(photoGalleryButton);\n      \n      // Should show photo gallery modal\n      await waitFor(() => {\n        expect(screen.getByText('ðŸ“¸')).toBeInTheDocument();\n      });\n    });\n  });\n\n  describe('Audio Controls', () => {\n    it('should toggle mute state when mute button is clicked', async () => {\n      render(<BirthdayPianoSurprise />);\n      \n      // Start game to show mute button\n      const startButton = screen.getByText('ðŸŽµ Start Playing');\n      fireEvent.click(startButton);\n      \n      const muteButton = await screen.findByRole('button', { name: /ðŸ”Š|ðŸ”‡/ });\n      fireEvent.click(muteButton);\n      \n      // Button should change state (implementation detail)\n      expect(screen.getByRole('button', { name: /ðŸ”Š|ðŸ”‡/ })).toBeInTheDocument();\n    });\n  });\n\n  describe('Responsive Design', () => {\n    it('should handle mobile viewport', () => {\n      // Mock mobile viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 375,\n      });\n      \n      render(<BirthdayPianoSurprise />);\n      \n      // Should render without errors on mobile\n      expect(screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();\n    });\n\n    it('should handle desktop viewport', () => {\n      // Mock desktop viewport\n      Object.defineProperty(window, 'innerWidth', {\n        writable: true,\n        configurable: true,\n        value: 1920,\n      });\n      \n      render(<BirthdayPianoSurprise />);\n      \n      // Should render without errors on desktop\n      expect(screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();\n    });\n  });\n\n  describe('Error Handling', () => {\n    it('should handle media loading errors gracefully', async () => {\n      const { loadMediaFiles } = require('../../utils/mediaLoader');\n      loadMediaFiles.mockRejectedValueOnce(new Error('Network error'));\n      \n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\n      \n      render(<BirthdayPianoSurprise />);\n      \n      await waitFor(() => {\n        expect(consoleSpy).toHaveBeenCalledWith('Error loading media:', expect.any(Error));\n      });\n      \n      consoleSpy.mockRestore();\n    });\n\n    it('should continue working even with audio context errors', () => {\n      // Mock AudioContext to throw error\n      global.AudioContext = jest.fn(() => {\n        throw new Error('AudioContext not supported');\n      });\n      \n      expect(() => render(<BirthdayPianoSurprise />)).not.toThrow();\n      \n      // Should still show welcome screen\n      expect(screen.getByText('ðŸŽ‰ HAPPY BIRTHDAY! ðŸŽ‰')).toBeInTheDocument();\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}