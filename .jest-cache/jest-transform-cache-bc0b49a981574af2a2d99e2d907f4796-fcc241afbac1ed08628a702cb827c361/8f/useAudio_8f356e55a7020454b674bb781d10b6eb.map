{"version":3,"names":["_react","require","useAudio","audioContextRef","useRef","activeOscillatorsRef","backgroundMusicRef","initAudioContext","useCallback","current","window","AudioContext","webkitAudioContext","playNote","frequency","duration","audioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","setValueAtTime","currentTime","type","now","gain","linearRampToValueAtTime","exponentialRampToValueAtTime","start","stop","push","onended","filter","osc","length","oldestOsc","shift","e","error","console","log","playWelcomeMusic","playGentleChord","frequencies","delay","setTimeout","forEach","freq","playBackgroundMusic","happyBirthdayNotes","clearTimeout","playMelodyNote","noteIndex","note","stopBackgroundMusic","useEffect","state","close","exports"],"sources":["useAudio.js"],"sourcesContent":["import { useRef, useCallback, useEffect } from 'react';\r\n\r\nexport const useAudio = () => {\r\n  const audioContextRef = useRef(null);\r\n  const activeOscillatorsRef = useRef([]);\r\n  const backgroundMusicRef = useRef(null);\r\n\r\n  // Initialize audio context\r\n  const initAudioContext = useCallback(() => {\r\n    if (!audioContextRef.current) {\r\n      audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\r\n    }\r\n    return audioContextRef.current;\r\n  }, []);\r\n\r\n  // Play a single note with ADSR envelope\r\n  const playNote = useCallback((frequency, duration = 300) => {\r\n    try {\r\n      const audioContext = initAudioContext();\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n      \r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n      \r\n      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);\r\n      oscillator.type = 'sine';\r\n      \r\n      const now = audioContext.currentTime;\r\n      \r\n      // ADSR envelope for smoother sound\r\n      gainNode.gain.setValueAtTime(0, now);\r\n      gainNode.gain.linearRampToValueAtTime(0.15, now + 0.01);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.05, now + 0.1);\r\n      gainNode.gain.setValueAtTime(0.05, now + duration / 1000 - 0.1);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.0001, now + duration / 1000);\r\n\r\n      oscillator.start(now);\r\n      oscillator.stop(now + duration / 1000);\r\n      \r\n      // Add to active oscillators array\r\n      activeOscillatorsRef.current.push(oscillator);\r\n      \r\n      // Remove from active array when note ends\r\n      oscillator.onended = () => {\r\n        activeOscillatorsRef.current = activeOscillatorsRef.current.filter(osc => osc !== oscillator);\r\n      };\r\n      \r\n      // Clean up old oscillators (keep max 6 simultaneous notes for performance)\r\n      if (activeOscillatorsRef.current.length > 6) {\r\n        const oldestOsc = activeOscillatorsRef.current.shift();\r\n        try {\r\n          oldestOsc.stop();\r\n        } catch (e) {\r\n          // Already stopped\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.log('Audio playback failed:', error);\r\n    }\r\n  }, [initAudioContext]);\r\n\r\n  // Play gentle welcome music\r\n  const playWelcomeMusic = useCallback(() => {\r\n    const audioContext = initAudioContext();\r\n    \r\n    const playGentleChord = (frequencies, delay = 0) => {\r\n      setTimeout(() => {\r\n        frequencies.forEach((freq) => {\r\n          const oscillator = audioContext.createOscillator();\r\n          const gainNode = audioContext.createGain();\r\n          \r\n          oscillator.connect(gainNode);\r\n          gainNode.connect(audioContext.destination);\r\n          \r\n          oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);\r\n          oscillator.type = 'sine';\r\n          \r\n          const now = audioContext.currentTime;\r\n          gainNode.gain.setValueAtTime(0, now);\r\n          gainNode.gain.linearRampToValueAtTime(0.05, now + 0.2);\r\n          gainNode.gain.exponentialRampToValueAtTime(0.001, now + 2.5);\r\n          \r\n          oscillator.start(now);\r\n          oscillator.stop(now + 2.5);\r\n        });\r\n      }, delay);\r\n    };\r\n\r\n    // Play a softer, more harmonious melody\r\n    playGentleChord([261.63, 329.63, 392.00], 0);    // C major chord\r\n    playGentleChord([293.66, 369.99, 440.00], 1200); // D major chord  \r\n    playGentleChord([261.63, 329.63, 392.00], 2400); // C major chord\r\n  }, [initAudioContext]);\r\n\r\n  // Play background music with Happy Birthday melody\r\n  const playBackgroundMusic = useCallback((happyBirthdayNotes) => {\r\n    const audioContext = initAudioContext();\r\n\r\n    // Stop any existing background music\r\n    if (backgroundMusicRef.current) {\r\n      clearTimeout(backgroundMusicRef.current);\r\n    }\r\n\r\n    const playMelodyNote = (noteIndex = 0) => {\r\n      if (noteIndex >= happyBirthdayNotes.length) {\r\n        // Restart melody after a pause\r\n        backgroundMusicRef.current = setTimeout(() => playMelodyNote(0), 2000);\r\n        return;\r\n      }\r\n\r\n      const note = happyBirthdayNotes[noteIndex];\r\n      const oscillator = audioContext.createOscillator();\r\n      const gainNode = audioContext.createGain();\r\n\r\n      oscillator.connect(gainNode);\r\n      gainNode.connect(audioContext.destination);\r\n\r\n      oscillator.frequency.setValueAtTime(note.frequency, audioContext.currentTime);\r\n      oscillator.type = 'sine';\r\n\r\n      const now = audioContext.currentTime;\r\n      \r\n      // Softer background music volume\r\n      gainNode.gain.setValueAtTime(0, now);\r\n      gainNode.gain.linearRampToValueAtTime(0.08, now + 0.05);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.04, now + 0.2);\r\n      gainNode.gain.setValueAtTime(0.04, now + note.duration / 1000 - 0.1);\r\n      gainNode.gain.exponentialRampToValueAtTime(0.0001, now + note.duration / 1000);\r\n\r\n      oscillator.start(now);\r\n      oscillator.stop(now + note.duration / 1000);\r\n\r\n      // Schedule next note\r\n      backgroundMusicRef.current = setTimeout(() => playMelodyNote(noteIndex + 1), note.duration);\r\n    };\r\n\r\n    playMelodyNote(0);\r\n  }, [initAudioContext]);\r\n\r\n  // Stop background music\r\n  const stopBackgroundMusic = useCallback(() => {\r\n    if (backgroundMusicRef.current) {\r\n      clearTimeout(backgroundMusicRef.current);\r\n      backgroundMusicRef.current = null;\r\n    }\r\n  }, []);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      // Stop all active oscillators\r\n      activeOscillatorsRef.current.forEach(osc => {\r\n        try {\r\n          osc.stop();\r\n        } catch (e) {\r\n          // Already stopped\r\n        }\r\n      });\r\n      \r\n      // Stop background music\r\n      if (backgroundMusicRef.current) {\r\n        clearTimeout(backgroundMusicRef.current);\r\n      }\r\n      \r\n      // Close audio context\r\n      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\r\n        audioContextRef.current.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    playNote,\r\n    playWelcomeMusic,\r\n    playBackgroundMusic,\r\n    stopBackgroundMusic,\r\n    initAudioContext\r\n  };\r\n};\r\n"],"mappings":"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","ignoreList":[]}